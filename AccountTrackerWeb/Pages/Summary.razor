@page "/summary"

@inject IAccountContainer AllAccounts
@inject NavigationManager NavigationManager

<PageTitle>Account Summary</PageTitle>

<h1>ACCOUNT SUMMARY</h1>

<p>Please find details for all your accounts below.</p>

<div>
	@foreach (var account in AllAccounts.Accounts)
	{
		<div @onclick=@(() => NavigateToAccount(account))>
			Account name: @account.AccountName
			Account holder: @account.AccountHolderName
			Current balance: £@account.CurrentValue
		</div>
	}
</div>

<div>
	<button @onclick=ToggleAccountAdder>Add account</button>
</div>

@if (_showAccountAdder)
{
	<AccountAdder DoOnSubmit="ToggleAccountAdder" />
}

<div>
	<button @onclick=@(() => NavigationManager.NavigateTo("/"))>
		Go to Home Page
	</button>
</div>

@code {
	private bool _showAccountAdder = false;

	private void NavigateToAccount(Account account)
	{
		NavigationManager.NavigateTo($"/accountdetails/{account.AccountId.ToString()}");
	}

	private void ToggleAccountAdder() => _showAccountAdder = !_showAccountAdder;
}
